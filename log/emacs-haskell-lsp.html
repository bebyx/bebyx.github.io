<!doctype html>
<html lang="uk">

	<head>
		<meta charset="utf-8">
		<title>bebyx: Як налаштувати GHCup + Haskell LSP в Emacs</title>
		<meta name="description" content="Як налаштувати GHCup + Haskell LSP в Emacs — інструкція українською мовою.">
		<meta name="author" content="Артем Бебик">
		<meta name="keywords" content="emacs, haskell, lsp">
		<meta property="article:published_time" content="2023-02-23T18:43EET" />

		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="../main.css">
		<link rel="stylesheet" href="../prism/prism.css">

		<link rel="alternate" hreflang="en" href="https://bebyx.co.ua/en/log/emacs-haskell-lsp.html" />
		</head>

	<body>
		<article>

			<header>
				<h1>Як налаштувати GHCup + Haskell LSP в Emacs</h1>
				<small><time datetime="2023-02-23T18:43EET">23-02-2023</time></small>
			</header>

			<p><b><a href="/en/log/emacs-haskell-lsp.html" hreflang="uk" rel="alternate">This post in English!</a></b></p>

			<p>
			  Haskell має чудовий мовний сервер. Втім довелося розв'язати кілька притаманних Емаксу проблем зі шляхом до колекції бінарників з арсеналу Гаскелевих струментів.
			</p>

			<p>
			  Сподіваюся, цей допис допоможе вам уникнути тої напасті.
			</p>

			<h2>Встановлюємо GHCup</h2>

			<p>
			  Тут усе просто, запускаємо команду з <a href="https://www.haskell.org/ghcup/" target="_blank">з сайту GHCup</a>:
			</p>

			<pre><code class="language-bash">curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | sh</code></pre>

			<p>
			  Ждемо. Довго.
			</p>

			<h2>Додаємо пакети Haskell до init.el</h2>

			<p>
			  Я користуюся <a href="https://github.com/jwiegley/use-package" target="_blank">use-package</a> (і вам рекомендую), тому встановлюю Гаскелові пакунки отак:
			</p>

			<pre><code class="language-elisp">;;; init.el
(use-package haskell-mode) ; install mode for Haskell files
(use-package lsp-mode) ; you will definitely need LSP support
(use-package lsp-ui) ; that's a nice LSP package as well
;; finally, Haskell LSP setup:
(use-package lsp-haskell
  :hook
  (haskell-mode . lsp)
  (haskell-literate-mode . lsp))</code></pre>

			<p>
			  <a href="https://github.com/bebyx/dotfiles/blob/master/.emacs.d/init.el" target="_blank">Мій init.el</a> для ширшого контексту.
			</p>

			<h2>Показуємо Емаксу, де GHCup поклав бінарники</h2>

			<p>
			  Два простих рядки:
			</p>

			<pre><code class="language-elisp" data-src="init.el">(setenv "PATH" (concat (getenv "PATH") ":" (expand-file-name "~/.ghcup/bin")))
(setq exec-path (append exec-path '(expand-file-name "~/.ghcup/bin")))</code></pre>

			<p>
			  Вставте їх до <code>init.el</code> і вважайте, що впорались.
			</p>

			<p>
			  Щоправда мусив попотіти, поки з'ясував, що тильда (<code>~</code>) без <code>expand-file-name</code> не працює.
			</p>

		</article>
		<nav>
			<a href="/">Повернутися</a>
		</nav>
		<script src="../prism/prism.js"></script>
		<script>Prism.highlightAll();</script>
	</body>

</html>
